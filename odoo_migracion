
# ğŸ§­ Pasos para realizar una migraciÃ³n entre versiones de Odoo

## ğŸ’¾ Requisitos previos

Durante el proceso de migraciÃ³n, el tamaÃ±o de la base de datos puede **incrementarse significativamente**, ya que el script de migraciÃ³n genera copias intermedias por cada versiÃ³n que debe atravesar.

**Ejemplo:**  
Una base de datos de 4â€¯GB en Odoo 15 que se migra a Odoo 18 podrÃ­a crecer hasta 12â€¯GB, ya que debe pasar por 3 versiones (15 â†’ 16 â†’ 17 â†’ 18).

**ğŸ“Œ Recomendaciones mÃ­nimas:**
- Espacio en disco disponible: al menos 3 veces el tamaÃ±o de tu base de datos original.
- Memoria RAM: mÃ­nimo **8â€¯GB**.

---

## ğŸ“¡ Obtener el script de migraciÃ³n oficial

DirÃ­gete a la pÃ¡gina oficial de migraciones de Odoo:  
ğŸ”— [https://upgrade.odoo.com/es](https://upgrade.odoo.com/es)

AllÃ­ encontrarÃ¡s el comando que debes ejecutar desde la versiÃ³n **mÃ¡s baja** de Odoo que estÃ¡s utilizando (por ejemplo, si estÃ¡s en Odoo 15, ejecÃºtalo desde esa versiÃ³n).

```bash
python <(curl -s https://upgrade.odoo.com/upgrade) test -d <nombre_de_tu_bd> -t <versiÃ³n_destino>
```

---

## ğŸ“¦ CÃ³mo generar y enviar un dump para migraciÃ³n

### 1. Crear un dump manual desde tu host

```bash
docker exec -t postgres_db pg_dump -U odoo tactics_migration -F c -f /tmp/tactics_migration.dump
```

Esto genera un archivo `.dump` dentro del contenedor PostgreSQL.

---

### 2. Copiar el archivo `.dump` al host local

```bash
docker cp postgres_db:/tmp/tactics_migration.dump ./tactics_migration.dump
```

---

### 3. Ejecutar el script de migraciÃ³n usando el archivo dump

```bash
python3 <(curl -s https://upgrade.odoo.com/upgrade) test -i tactics_migration.dump -t 18.0 --contract M20093019917720

python3 <(curl -s https://upgrade.odoo.com/upgrade) production -i tactics_migration.dump -t 18.0 --contract M20093019917720

```

Reemplaza el cÃ³digo de contrato por el tuyo correspondiente.

---

## ğŸ§¾ CÃ³mo obtener el cÃ³digo de suscripciÃ³n (Enterprise Code)

Desde el prompt interactivo de `psql`, ejecuta:

```sql
SELECT value FROM ir_config_parameter WHERE key = 'database.enterprise_code';
```

### Alternativa sin entrar al prompt:

```bash
docker exec -it postgres_db psql -U odoo -d tactics_migration -c "SELECT value FROM ir_config_parameter WHERE key='database.enterprise_code';"
```



